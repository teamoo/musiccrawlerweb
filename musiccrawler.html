<head>
  <title>MusiccrawlerWeb</title>
</head>

<body>
{{>header}}
{{> linklist}}
</body>

<template name="header">
	<div class="navbar">
		<div class="navbar-inner">
			<div class="container">
				<div class="nav pull-right">
					{{> user_info}}
				</div>
				<form class="navbar-search pull-left">
					<input type="text" class="search-query" placeholder="Search">
				</form>
			</div>
		</div>
	</div>
</template>

<template name="user_info">
	<ul class="nav pull-right">
		{{#if currentUser}}
			{{> user_loggedin}}
		{{else}}
			{{> user_loggedout}}
		{{/if}}
	</ul>
</template>

<template name="user_loggedin">
	{{#if loggingIn}}
		<li><a>Einloggen...</a></li>
	{{else}}
		<li>
			<span class="badge">
			 {{#if unreadlinks}}
				{{unreadlinks}}
			 {{else}}
				0
			 {{/if}}
			</span>
		</li>
		<li>
			<img class="img-rounded" style="height: 32px; margin-top: 4px;" src="{{currentUser.profile.pictureurl}}"/>
		</li>
		<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				{{currentUser.profile.username}}
			</a>
			<ul class="dropdown-menu">
				<li><a href="#accountSettingsModal" role="button" data-toggle="modal">Kontoeinstellungen</a></li>
				<li class="divider"></li>
				<li><a id="logout">Abmelden</a></li>
			</ul>
		</li>
	{{/if}}
</template>

<template name="user_loggedout">
	<li><a id="login">Login mit Facebook</a></li>
</template>

<template name="linklist">
  <table class="table table-condensed table-hover">
    {{#each links}}
      {{> link}}
    {{/each}}
  </table>

  {{#if selected_name}}
  <div class="details">
    <div class="name">{{selected_name}}</div>
    <input type="button" class="btn btn-small" value="Download" data-loading-text="Wird gesendet..."/>
  </div>
  {{/if}}

  {{#unless selected_name}}
  <div class="none">Click a link to select</div>
  {{/unless}}
</template>

<template name="link">
  <tr>
	<td>{{status}}</td>
    <td>{{name}}</td>
    <td>{{url}}</td>
	<td>{{source}}</td>
	<td>{{hoster}}</td>
	<td>{{date}}</td>
  </tr>
</template>


<!-- Modal -->
<div id="accountSettingsModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Kontoeinstellungen</h3>
  </div>
  <div class="modal-body">
    {{user.username}}
	{{user.profile.email}}
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Schließen</button>
    <button class="btn btn-primary">Speichern</button>
  </div>
</div>

